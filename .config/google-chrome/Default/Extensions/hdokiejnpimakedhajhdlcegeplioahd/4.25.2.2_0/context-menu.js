LPContextMenus=function(){var e=null,t=null,n=[],o=[],r=[],a=[],c="all",l=!1,i=20;function s(e,t){var n=gettabid(t),r=gettaburl(t),a=o[e.menuItemId];sendLpImprove("sitelogin",{shareType:getShareType(a),copy:0,autologin:0,source:"context"}),handleFill(n,{url:r,topurl:r,docid:0,force:!1,docnum:0,cmd:"autofillaid",aid:a,source:"notrack"})}function u(e,t){var n=o[e.menuItemId];copyusername(n),sendLpImprove("copyitem",{itemtype:"username",source:"context"})}function d(e,t){var n=o[e.menuItemId];copypassword(n),sendLpImprove("sitelogin",{shareType:getShareType(n),copy:1,autologin:0,source:"context"}),sendLpImprove("copypass",{action:"sitepassword",source:"context"})}function m(e,t){var n=o[e.menuItemId];copyurl(n)}function p(e,t){console.assert(LPContentScriptFeatures.omaria,"Omaria flag disabled!");var n=o[e.menuItemId],c=r[e.menuItemId],l=a[e.menuItemId];copyprop(n,c,0,-1,null,l),sendLpImprove("copyitem",{itemtype:c,source:"context"})}function f(e,t){console.assert(LPContentScriptFeatures.omaria,"Omaria flag disabled!");var n=o[e.menuItemId];fillitem(n,null,null,0,null,"context")}function g(e,t){console.assert(!LPContentScriptFeatures.omaria,"Omaria flag enabled!");var n=o[e.menuItemId];fillform(n,null,null,null,null,null,"context")}function h(e,t){console.assert(!LPContentScriptFeatures.omaria,"Omaria flag enabled!");var n=o[e.menuItemId];editprofile(n,null,"context")}function x(e,t){console.assert(LPContentScriptFeatures.omaria,"Omaria flag disabled!");var n=o[e.menuItemId];openeditsite(n),sendLpImprove("edititem",{itemtype:"Saved Site",source:"context"})}function y(e,t){console.assert(LPContentScriptFeatures.omaria,"Omaria flag disabled!");var n=o[e.menuItemId],a=r[e.menuItemId];openeditsecurenote(n),sendLpImprove("edititem",{itemtype:a,source:"context"})}function I(e,t){console.assert(!LPContentScriptFeatures.omaria,"Omaria flag enabled!");for(var r=0===t?s:1==t?u:2==t?d:m,a=e.slice(0,i).sort(function(e,t){return e.name&&t.name?e.name.localeCompare(t.name):0}),l=0;l<a.length;l++){var p=e[l].useusername;p=void 0!==p&&p.length?" ("+p+")":"";var f=chrome.contextMenus.create({title:e[l].name+p,contexts:[c],parentId:n[t],onclick:r});o[f]=e[l].aid,n[n.length]=f}e.length>i&&(n[n.length]=chrome.contextMenus.create({type:"separator",contexts:[c],parentId:n[t]}),n[n.length]=chrome.contextMenus.create({title:gs("Additional sites available in the Vault"),contexts:[c],parentId:n[t],onclick:openvault}))}function _(t,r){if(lploggedin){console.assert(!LPContentScriptFeatures.omaria,"Omaria flag enabled!"),n[n.length]=chrome.contextMenus.create({title:gs("AutoFill"),contexts:[c],parentId:e}),r&&(n[n.length]=chrome.contextMenus.create({title:gs("Copy Username"),contexts:[c],parentId:e}),n[n.length]=chrome.contextMenus.create({title:gs("Copy Password"),contexts:[c],parentId:e}),n[n.length]=chrome.contextMenus.create({title:gs("Copy URL"),contexts:[c],parentId:e})),n[n.length]=chrome.contextMenus.create({title:gs("Recheck Page"),contexts:[c],parentId:e,onclick:function(e,t){recheckpage()}}),n[n.length]=chrome.contextMenus.create({title:gs("Generate Secure Password"),contexts:[c],parentId:e,onclick:opengenpw}),void 0!==g_prefoverrides.show_formfills&&"1"!==g_prefoverrides.show_formfills||(n[n.length]=chrome.contextMenus.create({title:gs("Fill Forms"),contexts:[c],parentId:e}));for(var a=r?3:0,l=0;l<=a;l++)t.length>0?I(t,l):chrome.contextMenus.create({title:gs("No Matching Sites!"),contexts:[c],parentId:n[l]});!function(e){if(void 0===g_prefoverrides.show_formfills||"1"===g_prefoverrides.show_formfills){for(var t=e?6:3,r=0,a=0;a<g_formfills.length;a++)if(check_ident_ffid(g_formfills[a].ffid)){n[n.length]=chrome.contextMenus.create({title:g_formfills[a].decprofilename,contexts:[c],parentId:n[t]});var l=chrome.contextMenus.create({title:gs("Fill Form"),contexts:[c],parentId:n[n.length-1],onclick:g});if(o[l]=g_formfills[a].ffid,l=chrome.contextMenus.create({title:gs("Edit"),contexts:[c],parentId:n[n.length-1],onclick:h}),o[l]=g_formfills[a].ffid,(r+=1)>=i)break}n[n.length]=chrome.contextMenus.create({type:"separator",contexts:[c],parentId:n[t]}),n[n.length]=chrome.contextMenus.create({title:gs("Add Profile"),contexts:[c],parentId:n[t],onclick:function(){addprofile(null,"context")}}),n[n.length]=chrome.contextMenus.create({title:gs("Add Credit Card"),contexts:[c],parentId:n[t],onclick:function(){addcreditcard(null,"context")}}),n[n.length]=chrome.contextMenus.create({title:gs("Clear Forms"),contexts:[c],parentId:n[t],onclick:function(){clearforms("context")}}),n[n.length]=chrome.contextMenus.create({title:gs("Choose Profile and Credit Card"),contexts:[c],parentId:n[t],onclick:function(){openchooseprofilecc("context")}}),r>i&&(n[n.length]=chrome.contextMenus.create({type:"separator",contexts:[c],parentId:n[t]}),n[n.length]=chrome.contextMenus.create({title:gs("Additional form fills available in the Vault"),contexts:[c],parentId:t,onclick:openvault}))}}(r)}}function v(t,o){console.assert(LPContentScriptFeatures.omaria,"Omaria flag disabled!"),n[n.length]=chrome.contextMenus.create({title:gs(t),contexts:[c],parentId:e,onclick:o})}function C(e,t,l,i,s){console.assert(LPContentScriptFeatures.omaria,"Omaria flag disabled!");var u=chrome.contextMenus.create({title:t,contexts:[c],parentId:n[n.length-1],onclick:s});null!=u&&(o[u]=e,null!=l&&(r[u]=l,a[u]=i))}function b(t){lpdbg("context","createContextMenus called"),"undefined"==typeof chrome||void 0===chrome.contextMenus||l&&1!=lpGetPref("hideContextMenus",0)&&!t||(lpdbg("context","not created yet or preference changed"),chrome.contextMenus.removeAll(function(){lpdbg("context","context menu items all removed"),l=!1,n=[],0==lpGetPref("hideContextMenus",0)&&(lpdbg("context","creating context menu"),t||(t=M),e=chrome.contextMenus.create({title:gs("LastPass"),contexts:["all"],onclick:k},t))}))}function M(){console_log("Context menu callback function called"),l=!0}function k(e,t){if(lploggedin){if(g_issafari){var n=[],o=[];if(LPContentScriptFeatures.omaria)Object.keys(g_securenotes).forEach(function(e){check_ident_aid(g_securenotes[e].aid)&&isFillableNoteType(g_securenotes[e].notetype)&&o.push(g_securenotes[e])});else for(var r=0;r<g_formfills.length;r++)check_ident_ffid(g_formfills[r].ffid)&&(n[n.length]=g_formfills[r]);get_selected_tab(null,function(e){var t=lp_gettld_url(gettaburl(e));sendCS(gettabid(e),{cmd:"showcontext",sites:cache_usernames(reorderOnURL(getsites(t),gettaburl(e),!0,!0)),formfills:LPJSON.stringify(n),securenotes:LPJSON.stringify(o),can_copy:can_copy_to_clipboard()},"all")})}}else open_login()}return b(),{rebuildcontext:function r(a){if(setcurrenturl(a),"undefined"!=typeof chrome&&void 0!==chrome.contextMenus&&!g_issafari&&!g_ismaxthon&&1!=lpGetPref("hideContextMenus",0)&&t!=a)if(t=a,n.length)b(function(){t=null,r(a)});else if(o=[],lploggedin){var l=lp_gettld_url(a),m=reorderOnURL(getsites(l),a,!0,!1),g=can_copy_to_clipboard()&&!g_isedge;LPContentScriptFeatures.omaria?function(t,n){for(var o=Object.keys(g_securenotes),r=[],a=0;a<o.length&&r.length<i;a++)check_ident_aid(g_securenotes[o[a]].aid)&&fillableNoteTypes.indexOf(g_securenotes[o[a]].notetype)>-1&&r.push(addUserFriendlyDescription(g_securenotes[o[a]]));r.sort(function(e,t){return e.name&&t.name?e.name.localeCompare(t.name):0});var l=t.length<i?t.length:i,m=r.length<i?r.length:i,g=l+m;for(g>i&&(l=Math.ceil(l/g*i),m=Math.ceil(m/g*i)),t.slice(0,l).forEach(function(e){var t=e.useusername?" - "+e.useusername:"";v(e.name+t),C(e.aid,"Fill",null,null,s),C(e.aid,"Edit",null,null,x),n&&(C(e.aid,"Copy username","Username",null,u),C(e.aid,"Copy password","Password",null,d))}),a=0;a<m;a++){var h=r[a];if(v(h.decprofilename+"  -  "+h.description),C(h.aid,"Fill",null,null,f),C(h.aid,"Edit",h.notetype,null,y),n)switch(h.notetype){case"Credit Card":C(h.aid,"Copy card number","Number",null,p),C(h.aid,"Copy CVV/Security code","Security Code",null,p);break;case"Bank Account":C(h.aid,"Copy account number","Account Number",null,p),C(h.aid,"Copy routing number","Routing Number",null,p);break;case"Address":C(h.aid,"Copy first name","First Name",null,p),C(h.aid,"Copy last name","Last Name",null,p),C(h.aid,"Copy address 1","Address 1",null,p),C(h.aid,"Copy city/town","City / Town",null,p),C(h.aid,"Copy zip/postal code","Zip / Postal Code",null,p),C(h.aid,"Copy email address","Email Address",null,p),C(h.aid,"Copy phone number","Phone","num",p);break;case"Social Security":C(h.aid,"Copy SSN","Number",null,p)}}g>i&&(chrome.contextMenus.create({type:"separator",contexts:[c],parentId:e}),chrome.contextMenus.create({title:gs("Additional items available in the Vault"),contexts:[c],parentId:e,onclick:openvault})),chrome.contextMenus.create({type:"separator",contexts:[c],parentId:e}),v("Add Item",function(){openaddsecurenote()}),v("Recheck Page",function(e,t){recheckpage()}),v("Generate Secure Password",opengenpw)}(m,g):_(m,g)}},createContextMenus:b,cm_handler:k,lastcontexturl:t}}();
//# sourceMappingURL=sourcemaps/context-menu.js.map
