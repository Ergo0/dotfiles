var lp=lp||{};lp.pushClient=function(){var e;function n(){e&&"function"==typeof e.close&&e.close(),e=null}return{connect:function(c,t,a,s){e&&n(),e=new function(e,n,c,t){var a;function s(){(a=new WebSocket(e)).onopen=n,a.onmessage=c}s();var o=setInterval(function(){a.readyState!==a.OPEN&&a.readyState!==a.CONNECTING&&s()},t);this.close=function(){clearInterval(o),a.close(),a=null},this.send=function(e){a.readyState===a.OPEN&&a.send(JSON.stringify(e))}}(c.replace(/^http(s?):/gi,"ws$1:"),function(){e.send({channel:"/meta/handshake",version:"1.0",supportedConnectionTypes:["callback-polling"]})},function(n){try{var c=JSON.parse(n.data),s=c[0];switch(s.channel){case"/meta/connect":e.send({clientId:s.clientId,connectionType:"websocket",channel:"/meta/connect"});break;case"/meta/handshake":s.successful&&(e.send({clientId:s.clientId,connectionType:"websocket",channel:"/meta/connect"}),e.send({clientId:s.clientId,subscription:t,channel:"/meta/subscribe"}));break;case"/ping":case"/meta/subscribe":break;case t:void 0!==s.data.av_update&&a()}}catch(e){console.log("Caught error "+e)}},s)},disconnect:n}}();
//# sourceMappingURL=sourcemaps/push_client.js.map
