function hasNever(e,t,a,i){"undefined"!=typeof g_neverurls&&null!==g_neverurls||(g_neverurls={});var l=lpcanonizeUrl(e),r=l;if(l.length>0&&"/"==l.charAt(l.length-1)&&(l=l.substring(0,l.length-1)),g_neverurls[a]&&g_neverurls[a].length>0){for(var n=!1,o=0;g_neverurls[a]&&o<g_neverurls[a].length;o++){if((s=g_neverurls[a][o])==t||s==l){n=!0;break}}if(!n)return!0}for(o=0;g_neverurls[i]&&o<g_neverurls[i].length;o++){var s=g_neverurls[i][o],d=LPTools.createUrlPattern(s);if(-1!==s.indexOf("*")&&d&&d.test(r)||s==t||s==l||s==r)return!0}return!1}function hasNeverAutologin(e,t){return hasNever(e,t,"onlyautologins","neverautologins")}function hasNeverFormFill(e,t){return hasNever(e,t,"onlyformfills","neverformfills")}function hasNeverSave(e,t){return hasNever(e,t,"onlyaccounts","neveraccounts")}function hasNeverShowIcon(e,t){return hasNever(e,t,"onlyshowicons","nevershowicons")}function hasNeverGenerate(e,t){return hasNever(e,t,"onlygenerates","nevergenerates")}function hasNeverEnableLP(e,t){return hasNever(e,t,"onlyenablelp","neverenablelp")}function hasNeverMPReuse(e,t){return hasNever(e,t,"onlympwreuse","nevermpwreuse")}var g_accessibility_enabled=-1;function handleFill(e,t){var a=!1,i=null;if(!lploggedin||null!=grid_getdata("active"))return!1;if(void 0===t||!t)return!1;if(!check_for_frame_mismatch_ok(e,t.fromiframe,gs("Are you sure you want LastPass to fill your information into this site:"),t.cmd))return!1;if(g_fillfield_did_fillbest[e.toString()]=!1,"autofillaid"==t.cmd||"autologinaid"==t.cmd){var l=t.aid;if(g_last_launch[l]=(new Date).getTime(),void 0!==g_sites[l]){var r="autologinaid"==t.cmd,n=!0,o=get_record(l);t.no_manualfill_on_saveall&&o.save_all&&(n=!1),t.from_iframe&&!o.save_all&&(n=!0);var s=!!t.from_iframe;return g_fillfield_confirm_perfield={},fill({tabid:e,acct:g_sites[l],docid:null,submit:r,doconfirm:!r,docnum:"all",allowforce:!0,skip_pwprotect:!1,manualfill:n,automaticallyFill:null,skip_basicauth:null,from_iframe:s,desc:t.cmd,source:t.source}),!0}return!1}if(void 0===t.url)return!1;void 0!==t.username_val&&(g_username_vals[t.url]=t.username_val);var d,c=t.url,u=lp_gettld_url(c),f=0;if(null===t.aid||void 0===t.aid){var _=getcsinfo(e,g_CS_tops[e]);_&&(f=_.lastfill_aid)}if(lp_url_is_lastpass(c))return!1;if(void 0!==g_launches[e]&&g_launches[e]||null!=g_pending_launch&&(g_launches[e]=g_pending_launch),void 0!==g_launches[e]&&g_launches[e]){l=g_launches[e];if(void 0!==g_sites[l]){o=get_record(l);if(g_fillfield_confirm_perfield={},check_ident_aid(l)&&compare_tlds(u,lp_gettld_url(g_sites[l].url))){s=!!t.from_iframe;fill({tabid:e,acct:o,docid:null,submit:!0,doconfirm:!1,docnum:t.docnum,allowforce:!1,skip_pwprotect:!0,manualfill:null,automaticallyFill:null,skip_basicauth:null,from_iframe:s,desc:"FILL_F3"}),i=l,void 0!==t.numpass&&t.numpass>0?(g_launches[e]=null,g_pending_launch=null):setTimeout(function(){g_launches[e]=null,g_pending_launch=null},1e3)}}}var g=t.topurl!==c?lp_gettld_url(t.topurl):"",m={};if(!(hasNeverAutologin(c,u)||""!==g&&hasNeverAutologin(t.topurl,g)))if(f>0)m=tryAutoFillWithItem(c,e,t,f,i);else for(var h in d=getsites(u),d=void 0!==t.username_val&&t.username_val&&!given_username_in_accts(d,t.username_val,c)?[]:reorderOnURL(d,c,!0))if((m=tryAutoFillWithItem(c,e,t,d[h].aid,i)).done){m.filled&&0!=lpGetPref("showFillNotificationBar",1)&&(get_selected_tab(null,function(a){sendCS(e,{cmd:"showfillnotification",text:gs("LastPass has filled your login information into the form on this page."),sites:cache_usernames(d),docnum:t.docnum,do_40notify:g_40notify})}),a=!0);break}return a||0!=lpGetPref("showNotificationsAfterClick",1)||checkgenpwfillforms(e,c),!0}function tryAutoFillWithItem(e,t,a,l,r){try{islastpass&&g_ischrome&&!g_isedge&&1==arr[i].basic_auth&&g_accessibility_enabled<=0&&0==lpGetPref("basicauthnever",0)&&(g_is_mac&&have_binary_function("accessibility_enabled")?call_binary_function("accessibility_enabled",function(e){0==(g_accessibility_enabled=e?1:0)&&setTimeout(function(){get_selected_tab(null,function(e){sendCS(gettabid(e),{cmd:"showbasicauthnotification",needbinary:0,text:gs("In order for LastPass to fill into basic authentication dialogs, you need to enable access for assistive devices."),do_40notify:g_40notify})})},100)}):!g_is_win&&!g_is_mac||have_binary()||(g_accessibility_enabled=0,setTimeout(function(){get_selected_tab(null,function(e){sendCS(gettabid(e),{cmd:"showbasicauthnotification",needbinary:1,text:gs("In order for LastPass to fill into basic authentication dialogs, you need to install the binary version of LastPass for Chrome."),do_40notify:g_40notify})})},100)))}catch(e){}var n={filled:!1,done:!1};if(r&&r!==l)return verbose_log("launchedAccountId != accountId "+r+"!="+l),n;if(!check_ident_aid(l))return n;if(void 0===g_sites[l])return n;var o=get_record(l);if(!o)return n;if(o.genpw)return n;if(0==o.fields.length&&""==o.username)return n;var s=!1;if(o.never_autofill?s=!0:o.pwprotect||g_prompts.login_site_prompt?s=!0:0===o.url.indexOf("https://")&&0!==e.indexOf("https://")?s=!0:0==parseInt(lpGetPref("automaticallyFill",1))&&0==parseInt(lpGetPref("highlightFields",1))&&(s=!0),g_fillfield_confirm_perfield={},s)LPContentScriptFeatures.autofill_test&&LPModule.isInitialized(function(){LPModule.getRepository("AutoFillState").setFrameAllowed(t,0,!1)});else{var d=!o.save_all;d&&(void 0===g_fillfieldsmatches[e]&&(g_fillfieldsmatches[e]=[]),g_fillfieldsmatches[e][g_fillfieldsmatches[e].length]=o,g_fillfieldsmatchescurridx[e]=0);var c=parseInt(lpGetPref("automaticallyFill",1));fill({tabid:t,acct:o,docid:a.docid,submit:null,doconfirm:d,docnum:a.docnum,allowforce:null,skip_pwprotect:!0,manualfill:null,automaticallyFill:c,desc:"FILL_F4",source:a.source}),n.filled=!0}return n.done=!0,n}function checkWeakDuplicateBreached(e,t,a){g_showweakdupalerts&&qualifyForWeakCheck(getpasswordfromacct(e))&&(g_ischrome||g_issafari||g_isfirefoxsdk||g_issafari_appext)&&(0!=g_disablepwalerts||void 0!==e.noalert&&"1"==e.noalert||getWeakAndDuplicateIds(g_username_hash,g_username,function(i){var l=null!=e.sharedfromaid&&""!=e.sharedfromaid&&"0"!=e.sharedfromaid&&"null"!=e.sharedfromaid?1:0,r=issharedfolder(g_shares,e.group),n=!checkreadonly(r,!0),o=l||n||"1"!=e.pwch?0:1;isBreachedSite(e)?(g_notification_type="lpalert",g_notification_data={cmd:"notification",type:"lpalert",name:e.name,username:getusernamefromacct(e),breached:e.breached},set_badge(g_notification_data,t),drawIconAtRotation(0)):isDuplicateSite(i[0],e.aid)?(g_notification_type="alert",g_notification_data={cmd:"notification",type:"alert",aid:e.aid,name:e.name,username:getusernamefromacct(e),alerttype:"duplicate",tld:a,tabid:t,pwch:o},set_badge(g_notification_data,t),drawIconAtRotation(0)):isWeakPassword(i[1],e.aid)&&(g_notification_type="alert",g_notification_data={cmd:"notification",type:"alert",aid:e.aid,name:e.name,username:getusernamefromacct(e),alerttype:"weak",tld:a,tabid:t,pwch:o},set_badge(g_notification_data,t),drawIconAtRotation(0))}))}function checkgenpwfillforms(e,t,a){var i=lp_gettld_url(t),l=1!=lpGetPref("showGenerateNotifications",1)||hasNeverGenerate(t,i),r=1!=lpGetPref("showFormFillNotifications",1)||hasNeverFormFill(t,i),n=new Array;if(do_experimental_popupfill){for(var o=0;o<g_formfills.length;o++)check_ident_ffid(g_formfills[o].ffid)&&(n[n.length]=g_formfills[o]);0==n.length&&(r=!0);var s={cmd:"checkgenpwfillforms",nevergenerate:l,neverformfill:r,sites:cache_usernames(reorderOnURL(getsites(i),t,!0,!0)),formfills:LPJSON.stringify(n),active:g_popupfill_last_active[e],activefieldid:g_popupfill_last_active_fieldid[e]};a||(s.ff=g_cachedffdat),sendCS(e,s,"all")}else{if(!r){for(o=0;o<g_formfills.length;o++)check_ident_ffid(g_formfills[o].ffid)&&(n[n.length]=g_formfills[o]);0==n.length&&(r=!0)}if(!l||!r){s={cmd:"checkgenpwfillforms",nevergenerate:l,neverformfill:r,sites:cache_usernames(reorderOnURL(getsites(i),t,!0,!0)),formfills:LPJSON.stringify(n)};a||(s.ff=g_cachedffdat),sendCS(e,s,"all")}}}function cache_usernames(e){for(var t in e)e[t].useusername=getusernamefromacct(e[t]);return LPJSON.stringify(e)}function handleNever(e,t){handleNeverURL(t)}function handleNeverURL(e){if("neverautofill"==e.cmd){var t=e.aid;if(void 0===g_sites[t])return;g_sites[t].never_autofill=!0,g_sites[t].autologin=!1;var a="aid="+en(t);lpMakeRequest(base_url+"set_never_autofill.php",a,null,null)}else if("neverdomain"==e.cmd||"neverpage"==e.cmd){var i="neverdomain"==e.cmd?lp_gettld_url(e.url):lpcanonizeUrl(e.url);a="url="+en(AES.url2hex(i));void 0!==e.fromsave&&e.fromsave?g_neverurls.neveraccounts.push(i):void 0!==e.fromgenerate&&e.fromgenerate?(a+="&type=1",g_neverurls.nevergenerates.push(i)):void 0!==e.fromformfill&&e.fromformfill?(a+="&type=2",g_neverurls.neverformfills.push(i)):void 0!==e.fromshowicons&&e.fromshowicons?(a+="&type=6",g_neverurls.nevershowicons.push(i)):void 0!==e.neverforall&&e.neverforall?(g_neverurls.neveraccounts.push(i),g_neverurls.nevergenerates.push(i),g_neverurls.neverformfills.push(i),g_neverurls.neverautologins.push(i),g_neverurls.nevershowicons.push(i),a+="&type=7"):void 0!==e.neverenablelp&&e.neverenablelp?(g_neverurls.neverenablelp.push(i),a+="&type=8"):(a+="&type=3",g_neverurls.neverautologins.push(i)),lpMakeRequest(base_url+"add_never.php",a,null,null)}g_local_accts_version++,rewritelocalfile()}function handleSave(e,t){var a=!1;if(g_cpwbot&&CPWbot_bg&&e==CPWbot_bg.get_pwchangetabid())return L("handleSave(tab:"+e+", state="+CPWbot_bg.g_pwchangestate+")"),console_log("Skipping save because driving a password change"),!1;var i=get_ff_translation("ff_currpass_regexp");if("undefined"==typeof SAVEALLFORMSUBMITS){if(!lploggedin)return!1;if(lp_url_is_lastpass(t.url,!0))return!1;if(lp_url_is_lastpassext(t.url))return!1}for(var l=t.formdata.split("\n"),r=!1,n=!1,o=null,s="",d="",c=new Array,u=new Array,f=function(e){for(var t={pwcount:0,textcount:0,pwseencount:0,textseencount:0,hiddencount:0},a=0;a<e.length;a++){var i=e[a],l=i.split("\t");if(4==l.length||5==l.length){decodeURIComponent(l[2]);var r=l[3];"password"==r?t.pwcount++:"hidden"==r?t.hiddencount++:G(r)&&t.textcount++,"password"==r&&(l.length<5||l.length>=5&&"seen"==l[4])?t.pwseencount++:G(r)&&(l.length<5||l.length>=5&&"seen"==l[4])&&t.textseencount++}}return t}(l),_=0;_<l.length;_++){if(4==(T=l[_].split("\t")).length||5==T.length){var g=decodeURIComponent(T[2]),m=T[3],h=!0;if(r&&T.length>=5&&"notseen"==T[4]&&(h=!1),(!r||!n)&&G(m)&&g.length>0&&(h&&(s=g,r=!0),0==n&&void 0!==SpecialSites[lpcanonizeUrl(t.url)]&&(n=!0)),!("password"==m&&T.length>=5&&"notseen"==T[4]&&f.pwcount>1&&f.pwseencount>0)&&"password"==m&&(h||0==n)){var p=decodeURIComponent(T[1]);if(c[u.length]={name:p,value:g},u[u.length]=g,!n&&g.length&&(d=g,n=!0),null==o){var v=new RegExp(i,"i");p&&(p==t.current_pw_field_name||v.exec(p))&&(o=u.length-1)}}}}if(n){t.username=s,t.password=d,!r&&u.length>1&&u[0]!=u[1]&&null==o&&(t.username=u[0],t.password=u[1]);var y=lp_gettld_url(t.url);t.tld=y;var w=null,b=!1,S="",x="";u.length>1&&u[u.length-1]==u[u.length-2]&&""!=u[u.length-1]&&c[u.length-1].name!=c[u.length-2].name?(b=!0,S=u[u.length-1],w=1,3==u.length&&u[0]!=u[1]&&u[1]==u[2]&&(x=u[0])):u.length>1&&u[0]==u[1]&&""!=u[0]&&c[0].name!=c[1].name?(b=!0,S=u[0],w=2):u.length>1&&u[0]!=u[1]&&""!=u[0]&&null!=o&&(0==o&&2==u.length?(S=u[1],w=3):1==o&&2==u.length?(S=u[0],w=4):(S="",w=6));var k=b||null!=o&&S,P=new Array;if(k){P=getsites(y,!0);if(t.createacct=2==u.length||array_length(P)>0,t.createacct){var C="",A="",F="",j="";for(_=0;_<l.length;_++){var T;if(4==(T=l[_].split("\t")).length||5==T.length){m=T[3];if(""==C&&G(m)&&""!=T[1]&&""!=T[2]){p=decodeURIComponent(T[1]);var N=get_ff_translation("ff_username_regexp");if(""!=N)(v=new RegExp(N,"i")).exec(p)&&(C=p,A=decodeURIComponent(T[2]))}if(""==F&&G(m)&&""!=T[1]&&""!=T[2]){p=decodeURIComponent(T[1]);var q=get_ff_translation("ff_email_regexp");if(""!=q)(v=new RegExp(q,"i")).exec(p)&&(F=p,j=decodeURIComponent(T[2]))}if(""!=C&&""!=F)break}}""==C&&(C=F,A=j),t.username_field=C,""!=A&&(t.username=A)}}if(k&&array_length(P)>0){verbose_log("looking for newpw="+(g_show_pw_in_logs||g_isadmin?S:"REDACTED")+" tld="+y+" in g_didchangepw");var U=void 0!==g_didchangepw[SHA256(S+y)]&&g_didchangepw[SHA256(S+y)]>(new Date).getTime()-6e5;if(verbose_log("already processed pw ="+(g_show_pw_in_logs||g_isadmin?S:"REDACTED")+" tld="+y+" is "+U),!U&&(g_notification_type="change",t.newpw=S,t.oldpw=x,g_notification_data=t,LPContentScriptFeatures.new_save_site||sendTS({cmd:"notification",type:"change"}),a=!0,0!=lpGetPref("showChangeNotificationBar",1))){var I=P;if(t.sitecount=array_length(I),1==array_length(I))for(var _ in I){t.singleaid=_,z=gs("LastPass detected a password change for user:")+" "+of(getusernamefromacct(g_sites[_]));break}else z=gs("LastPass detected a password change for domain:")+" "+of(y);sendCS(e,{cmd:"showchangenotification",text:z,notificationdata:t,do_40notify:g_40notify}),g_persistent_notifications[e]={cmd:"showchangenotification",text:z,notificationdata:t,do_40notify:g_40notify},write_history({cmd:"showchangenotification",aid:t.singleaid,spin:w,tld:t.tld,url:t.url,msg:z})}}else{if(hasNeverSave(t.url,y)||(void 0!==t.topdocurl&&hasNeverSave(t.topdocurl),lp_gettld_url(t.topdocurl)))return!1;var D=reorderOnURL(getsites(y),t.url);for(var E in D)if(check_ident_aid(E.aid)&&void 0!==g_sites[E.aid]){var R=get_record(E.aid),O=getusernamefromacct(R),M=getpasswordfromacct(R);if(g_show_pw_in_logs,(!r||s==lpmdec_acct(R.username,!0,R,g_shares)||value_is_masked(s)||s==O)&&(d==lpmdec_acct(R.password,!0,R,g_shares)||d==M)||R.save_all&&isMatch(R,r,s,d)||s==lpmdec_acct(R.username,!0,R,g_shares)&&""==d)return!1;if(r&&(s==lpmdec_acct(R.username,!0,R,g_shares)||value_is_masked(s)||s==O)&&u&&2==u.length&&(u[0]==lpmdec_acct(R.password,!0,R,g_shares)||u[1]==lpmdec_acct(R.password,!0,R,g_shares))&&(d===u[0]||d===u[1]))return!1}if(g_notification_type="save",g_notification_data=t,0==lpGetPref("showSaveSiteNotifications",0)||LPContentScriptFeatures.new_save_site||(sendTS({cmd:"notification",type:"save"}),a=!0),0!=lpGetPref("showSaveNotificationBar",1)&&lpCheckAddSite(t.username,t.password,y)){var z=gs("Should LastPass remember this password?");g_persistent_notifications[e]={cmd:"showaddnotification",text:z,notificationdata:LPJSON.stringify(t),do_40notify:g_40notify,tutorialData:IntroTutorial.getState()};var W="streetscape.com"==y?"all":null;sendCS(e,{cmd:"showaddnotification",text:z,notificationdata:LPJSON.stringify(t),do_40notify:g_40notify,tutorialData:IntroTutorial.getState()},W),write_history({cmd:"showaddnotification",username:t.username,tld:y,url:t.url,msg:z,spin:null}),a=!0}}}return a;function G(e){if(!e)return!1;var t,a=["text","email","tel","url"];for(t in a)if(a.hasOwnProperty(t)&&e==a[t])return!0;return!1}}function lpCheckAddSite(e,t,a){var i=lp_get_gmt_timestamp(),l=new Array;for(var r in g_rejectedaddsites){i>(n=g_rejectedaddsites[r]).rejectedTime+600&&(l[l.length]=r)}for(r=l.length-1;r>=0;r--)g_rejectedaddsites.splice(l[r],1);for(var r in g_rejectedaddsites){var n;if((n=g_rejectedaddsites[r]).username==e&&lpdec(n.encryptedPassword)==t&&compare_tlds(n.tld,a))return!1}return!0}var lastupdatefields="";function handleUpdateFields(e,t){if(LPContentScriptFeatures.new_save_site)return!1;var a=t.aid,i=g_sites[a];if(!i)return!1;var l=issharedfolder(g_shares,i.group);if(!checkreadonly(l,!0))return!1;var r=new Array,n=[],o=updateAndEncryptData(t.formdata,r,n,i),s=SHA256(o);if(s==lastupdatefields)return!1;lastupdatefields=s,update_username_from_fields_if(i,r);for(var d=i.fields.length-1;d>=0;d--)i.fields[d].otherfield||"1"==i.fields[d].otherlogin||i.fields.splice(d,1);for(d=0;d<r.length;d++)i.fields[i.fields.length]=r[d];g_local_accts_version++,rewritelocalfile();var c="data="+en(bin2hex(o))+"&ref="+en(url2hex(t.url))+"&updatefields=1&aid="+en(a);return c+=0==l?"":"&sharedfolderid="+en(l.id),i.postdata=c,i.posturl=base_url+"gm_deliver.php",i.newvalues=n,updateFieldsFromSubmit(c,i),!0}function handleAddUrid(e,t){if(LPContentScriptFeatures.new_save_site)return!1;var a=t.aid,i=g_sites[a],l=issharedfolder(g_shares,i.group);if(checkreadonly(l,!0)){for(var r=new Array,n=0;n<i.fields.length;n++)"1"!=i.fields[n].otherlogin||lp_in_array(i.fields[n].urid,r)||(r[r.length]=i.fields[n].urid);if(!(r.length>=10)){var o=new Array,s=[],d=updateAndEncryptData(t.formdata,o,s,i);update_username_from_fields_if(i,o);for(n=0;n<o.length;n++)o[n].otherlogin="1",o[n].url=url2hex(t.url),i.fields[i.fields.length]=o[n];g_local_accts_version++,rewritelocalfile();var c="data="+en(bin2hex(d))+"&ref="+en(url2hex(t.url))+"&addurid=1&aid="+en(a);c+=0==l?"":"&sharedfolderid="+en(l.id),i.postdata=c,i.posturl=base_url+"gm_deliver.php",i.newvalues=s,updateFieldsFromSubmit(c,i)}}}function update_username_from_fields_if(e,t){for(var a=get_ff_translation("ff_combineddummy_regexp"),i=new RegExp(a,"i"),l=0,r="",n=0;n<t.length;n++)if("text"==t[n].type||"email"==t[n].type||"tel"==t[n].type||"url"==t[n].type){if(i.exec(t[n].name)||i.exec(t[n].id)||"answer"==t[n].id||"answer"==t[n].name)continue;if(r=t[n].value,++l>=2)break}if(1==l&&""!=r){var o=0;for(n=0;n<e.fields.length;n++)if(!e.fields[n].otherfield&&("text"==e.fields[n].type||"email"==e.fields[n].type||"tel"==e.fields[n].type||"url"==e.fields[n].type)){o++;break}0==o&&(e.username=r,e.unencryptedUsername=lpdec_acct(crypto_btoa(e.username),e,g_shares))}}function handleSaveAll(e,t){t.save_all=1,g_site_data=t,LPPlatform.openTabDialog("site",{saveAllData:t})}function isMatch(e,t,a,i){for(var l=!t,r=!1,n=0;n<e.fields.length;n++)if("text"==e.fields[n].type||"password"==e.fields[n].type||"email"==e.fields[n].type||"tel"==e.fields[n].type||"url"==e.fields[n].type){var o=lpmdec_acct(e.fields[n].value,!0,e,g_shares);"text"!=e.fields[n].type&&"email"!=e.fields[n].type&&"tel"!=e.fields[n].type&&"url"!=e.fields[n].type||a!=o||(l=!0),"password"==e.fields[n].type&&i==o&&(r=!0)}return!(!l||!r)}var g_reqindex=0;function fill(e){var t=e.tabid,a=e.acct;if(null==t||!a)return!1;var i=e.docid,l=e.submit,r=e.doconfirm,n=e.docnum,o=e.allowforce,s=e.skip_pwprotect,d=e.skip_basicauth,c=e.from_iframe,u=e.desc,f=e.source,_=e.manualfill;_||(_=!1);var g=e.automaticallyFill;if(void 0!==g&&null!=g||(g=1),write_history({cmd:u,tabid:t,docnum:n,aid:a.aid,submit:l,doconfirm:r,allowforce:o}),verbose_log("tabid="+t+"\nacct.aid="+a.aid+"\ndocid="+i+"\nsubmit="+l+"\ndoconfirm="+r+"\ndocnum="+n+"\nallowforce="+o+"\nskip_pwprotect="+s+"\nmanualfill="+_+"\nautomaticallyFill="+g+"\nskip_basicauth="+d+"\nfrom_iframe="+c+"\ndesc="+u),_||!IntroTutorial.getState().enabled){var m=!1,h=!1,p=!1,v=0;if(!s&&(a.pwprotect||g_prompts.login_site_prompt))return console_log("FILL : Showing Security Prompt"),void security_prompt(function(e){setTimeout(function(){var e=get_record(a.aid);fill({tabid:t,acct:e,docid:i,submit:l,doconfirm:r,docnum:n,allowforce:o,skip_pwprotect:!0,manualfill:_,automaticallyFill:null,skip_basicauth:null,from_iframe:c,desc:"fill_PW"})},100)},null,null,!0,a.aid,!0);get_selected_tab(null,function(e){if(!d&&g&&(o||1==a.basic_auth)&&gettabid(e)==t&&g_ischrome&&have_binary_function("fill_basicauth")){var y=getusernamefromacct(a),w=getpasswordfromacct(a);if(""!=y||""!=w){write_history({cmd:"check_autologin1",tabid:t,aid:a.aid,submit:b});var b=check_autologin(l,a),S=lp_gettld_url(a.url),x=lp_gettld_url(g_basicauth_origurl);return compare_tlds(S,x)&&(S=x),void call_binary_function("fill_basicauth",y,w,!!o,S,!!b,function(e){e?g_basicauth_found=!1:fill({tabid:t,acct:a,docid:i,submit:l,doconfirm:r,docnum:n,allowforce:o,skip_pwprotect:s,manualfill:_,automaticallyFill:g,skip_basicauth:!0,desc:"FILLBASIC",source:f})})}}update_cs_lastfill_aid(t,a.aid);S=a.tld;customjs_has_humanize(a.aid)&&(m=!0),customjs_has_v2humanize(a.aid)&&(h=!0),customjs_has_force_fillbest(a.aid)&&(p=!0);var k=a.fields,L=k.length?k.length:0;r=1==r?1:0,o=o?1:0,c=c?1:0;var P=null!=a.sharedfromaid&&""!=a.sharedfromaid&&"0"!=a.sharedfromaid&&"null"!=a.sharedfromaid?1:0,C=!1;if(0==L&&!o&&customjs_has_userpass_overrides(a.aid)&&(o=!0,C=!0),0!=L){for(var A=0,F=0,j=0;j<k.length;j++)k[j]&&("text"!=k[j].type&&"email"!=k[j].type&&"tel"!=k[j].type||F++,"password"==k[j].type&&A++);var T=!a.save_all&&0==A;T||void 0===SpecialSites[lpcanonizeUrl(a.url)]||a.save_all||(T=!0);var N=!1;if(k&&k.length){var q=0,U=0;k.forEach(function(e){"password"===e.type?q++:"email"!==e.type&&"text"!==e.type||U++}),N=2===k.length&&1===q||1===U}var I=[];for(j=0;j<k.length;j++)if(k[j])if(a.save_all||1!=r||"password"==k[j].type||o||T){var D=k[j],E=D.value,R=D.type,O="password"===R?"password":N?"userName":"other";if((void 0===a.captcha_id||""==a.captcha_id||a.captcha_id!=D.name||"text"!=R)&&("text"!=R&&"password"!=R&&"email"!=R&&"tel"!=R&&"textarea"!=R&&"url"!=R||(E=lpmdec_acct(E,!0,a,g_shares)),""==D.name||void 0===I[D.name+E+D.type]))if(I[D.name+E+D.type]=1,""!=E&&null!==E||("text"!=R&&"email"!=R&&"tel"!=R||1!=F?"password"==R&&1==A&&(E=getpasswordfromacct(a),O="password"):(E=getusernamefromacct(a),O="userName")),""!=E&&null!==E){verbose_log("Sending FillRequest: "+j+"\ntype="+R+"\nname="+D.name+"\nvalue=<hidden>");var M=!!(void 0!==g_launches[t]&&g_launches[t]&&g_launches[t]==a.aid&&"undefined"!=typeof g_last_launch&&void 0!==g_last_launch[a.aid]&&(new Date).getTime()-g_last_launch[a.aid]<=25e3),z={from:"fillfield_A",index:g_reqindex,time:(new Date).getTime(),uniqid:Math.floor(1e8*Math.random())};++g_reqindex,m&&v++,fillfieldCS(t,n,a.aid,{reqinfo:z,docid:i,sharedsite:P,automaticallyFill:g,is_launch:M,manualfill:_,name:D.name,value:E,type:R,checked:D.checked,otherfield:D.otherfield,doconfirm:r||a.save_all&&"password"==R?1:2,allowforce:o,from_iframe:c,humanize:m,v2humanize:h,delayquants:v,force_fillbest:p,originator:u,valueType:O},l)}else verbose_log("value is empty, will not fill "+D.name)}else verbose_log("initial fill attempt on page, skipping non-password "+k[j].name)}else if(o){console_log("no fields. finding best match "+getusernamefromacct(a)+" and <hidden>");M=!!(void 0!==g_launches[t]&&g_launches[t]&&g_launches[t]==a.aid&&"undefined"!=typeof g_last_launch&&void 0!==g_last_launch[a.aid]&&(new Date).getTime()-g_last_launch[a.aid]<=25e3);console_log("Sending fillbest from A reqindex="+g_reqindex);z={from:"fillbest_A",index:g_reqindex,time:(new Date).getTime(),uniqid:Math.floor(1e8*Math.random())};++g_reqindex,fillbestCS(t,n,a.aid,{reqinfo:z,docid:i,updatefields:1,addurid:0,sharedsite:P,automaticallyFill:g,allowforce:o,is_launch:M,humanize:m,valueType:O,usingCustomJS:C})}if(o&&logLoginAndCheckWeakPassword(t,a,f),1!=r){b=check_autologin(l,a);if("undefined"!=typeof AUTOSUBMIT&&(b=!0),write_history({cmd:"check_autologin2",tabid:t,aid:a.aid,submit:b,docnum:n}),"string"==typeof a.custom_js&&""!=a.custom_js&&sendCS(t,{cmd:"run_custom_js",docid:i,custom_js:a.custom_js,username:getusernamefromacct(a),password:lpmdec_acct(a.password,!0,a,g_shares),onlyfill:b?0:1,loc:3},n),"string"!=typeof a.custom_js||-1==a.custom_js.indexOf("lpdontsubmit"))if(b)submitCS(t,n,a.aid,{docid:i,humanize:m,delayquants:v})}})}}function logLoginAndCheckWeakPassword(e,t,a){get_all_windows({populate:!0},function(i){for(var l=0;l<i.length;l++)for(var r=0;r<get_tabs_length(i[l]);r++){var n=get_tabs(i[l])[r];gettabid(n)==e&&(checkWeakDuplicateBreached(t,e,lp_gettld_url(gettaburl(n))),(g_loglogins||LPISLOC)&&void 0===g_loggedLogins[t.aid]&&(g_loggedLogins[t.aid]="1",loglogintab(t.aid,n,a,t.autologin?1:0)))}})}function showpageoverlay(e){sendCS(e,{cmd:"showoverlay",urlprefix:getchromeurl("",!0)})}function check_autologin(e,t){var a=!1;if(e)a=!0;else if(t.autologin){var i=(new Date).getTime(),l=parseInt(lpGetPref("autoautoVal",25));(isNaN(l)||""==l||l<=0)&&(l=25);var r=i-1e3*l;void 0===t.last_auto_login||isNaN(t.last_auto_login)||t.last_auto_login<r?(console_log("Launching autologin"),t.last_auto_login=i,a=!0):(write_history({cmd:"check_autologin",msg:sprintf("last autologin to %s was too soon, %s < %s, pref=%d seconds",lp_gettld_url(t.url),new Date(t.last_auto_login).toUTCString(),new Date(r).toUTCString(),l)}),console_log("last autologin too soon!"))}return a}function fillfieldsconfirm(e){if(!e||!lploggedin)return!1;var t=e.url,a=void 0!==e.topurl?e.topurl:"",i=lp_gettld_url(t),l=e.result,r=e.aid,n=e.docid,o=e.tabid,s=e.doconfirm,d=!!e.from_iframe,c=e.manualfill,u=e.allowforce,f=!1,_=void 0!==e.automaticallyFill?e.automaticallyFill:1,g=e.force_fillbest,m=e.source,h=e.name;if(!(P=get_record(r)))return!1;if(h&&(g_fillfield_confirm_perfield[h]=!!l),(hasNeverAutologin(t,i)||a&&a!=t&&hasNeverAutologin(a,i))&&(f=!0),l){if(g_do_totp){var p=getusernamefromacct(P);""!=p&&(g_usercache[i]=p)}if(logLoginAndCheckWeakPassword(o,P,m),2==s)return d&&c&&!f&&sendCS(o,{cmd:"conditionalforcefill",reqinfo:w,username:getusernamefromacct(P),password:getpasswordfromacct(P),aid:P.aid,sharedsite:v,automaticallyFill:_,from_iframe:d},e.docnum),!0}if(f)return!1;var v=null!=P.sharedfromaid&&""!=P.sharedfromaid&&"0"!=P.sharedfromaid&&"null"!=P.sharedfromaid?1:0;if(P.save_all){if(!l&&sufficient_condition_fill_saveall(P))return console.log("sufficient successful fills, ignoring failed fill result on saveall fill"),!0;if(!l||c){var y=!!(void 0!==g_launches[o]&&g_launches[o]&&g_launches[o]==P.aid&&"undefined"!=typeof g_last_launch&&void 0!==g_last_launch[P.aid]&&(new Date).getTime()-g_last_launch[P.aid]<=25e3);console_log("Sending fillbest from B reqindex="+g_reqindex);var w={from:"fillbest_B",index:g_reqindex,time:(new Date).getTime(),uniqid:Math.floor(1e8*Math.random())};++g_reqindex,fillbestCS(o,e.docnum,P.aid,{reqinfo:w,docid:n,updatefields:0,addurid:0,sharedsite:v,automaticallyFill:_,is_launch:y,saveall:!!P.saveall})}}else if(l){if(P=get_record(r))u=!0;u=null,c=null;d&&e.manualfill&&(c=!0,u=!0);var b=!1;fill({tabid:o,acct:P,docid:n,submit:null,doconfirm:!1,docnum:e.docnum,allowforce:u,skip_pwprotect:!0,manualfill:c,automaticallyFill:_,skip_basicauth:b,from_iframe:d,desc:"FILL_F5"}),delete g_fillfieldsmatches[t],delete g_fillfieldsmatchescurridx[t]}else if(e.allowforce||g&&!g_fillfield_did_fillbest[o.toString()]&&!sufficient_condition_fill_nonsaveall(P)){g&&(g_fillfield_did_fillbest[o.toString()]=!0);y=!!(void 0!==g_launches[o]&&g_launches[o]&&g_launches[o]==P.aid&&"undefined"!=typeof g_last_launch&&void 0!==g_last_launch[P.aid]&&(new Date).getTime()-g_last_launch[P.aid]<=25e3);console_log("Sending fillbest from C reqindex="+g_reqindex);w={from:"fillbest_C",index:g_reqindex,time:(new Date).getTime(),uniqid:Math.floor(1e8*Math.random())};++g_reqindex,fillbestCS(o,e.docnum,r,{reqinfo:w,docid:n,updatefields:0,addurid:c?1:0,sharedsite:v,automaticallyFill:_,is_launch:y,force_fillbest:g})}else{var S=g_fillfieldsmatches[t];if(S)for(var x=!1,k=0;k<S.length;k++){var L=S[k].aid;if(x){var P;if(P=g_sites[L])b=!1;return void fill({tabid:o,acct:P,docid:n,submit:null,doconfirm:!0,docnum:e.docnum,allowforce:null,skip_pwprotect:!0,manualfill:null,automaticallyFill:_,skip_basicauth:b,from_iframe:d,desc:"FILL_F6"})}k==g_fillfieldsmatchescurridx[t]&&(g_fillfieldsmatchescurridx[t]++,x=!0)}delete g_fillfieldsmatches[t],delete g_fillfieldsmatchescurridx[t]}return!0}function web2plug(e){if("2"==e.rsa){g_local_key=AES.hex2bin(e.key),g_local_key_hex=e.key,g_local_key_hash=SHA256(g_local_key),rsa_userchangedpassword();var t=opendb();createDataTable(t),t&&!LPISLOC&&(g_indexeddb?t.transaction("LastPassData","readwrite").objectStore("LastPassData").delete(g_username_hash+"_accts"):t.transaction(function(e){e.executeSql("DELETE FROM LastPassData WHERE username_hash=? AND type=?",[db_prepend(g_username_hash),"accts"],function(e,t){},function(e,t){console_log(t)})})),lpWriteKeyFile()}else""!=g_username&&null!=g_username&&g_username!=e.username?loggedOut(!1,"web2plug"):(g_local_key=AES.hex2bin(e.key),g_local_key_hex=e.key,g_local_key_hash=SHA256(g_local_key),lpWriteKeyFile())}function recover(e,t,a,i){var l=lpParseUri(t),r=l.directory,n=l.file;""!=(r=r.replace(new RegExp("^/~[^/]*"),""))&&"/"!=r&&"/sso/"!=r||"recover.php"==n&&LPPlatform.getCurrentTabDetails(function(t){LPPlatform.openTabDialog("confirmation",{title:StringUtils.translate("Account Recovery"),text:StringUtils.translate("You have requested to use a One Time Password for account recovery. Are you sure you want to continue?"),handler:function(l){LPPlatform.activateTab(t),GetOTPHash(null,e,a,i),l()}})})}function loginfromwebsite(e){if(""!=e.wxusername&&""!=e.keyhex){var t=opendb();if(createSavedLoginsTable(t),t){1==e.rememberemail?(L("remembering email"),set_default_login_username(e.wxusername)):L("not remembering email");var a=function(a,i){if(i.rows.length>0){var l=i.rows.item(0).password,r=function(a){var l=get_key_iterations(e.wxusername);make_lp_key_iterations(e.wxusername,a,l,function(a){if(AES.bin2hex(a)!=e.keyhex)if(g_indexeddb){var l=i.rows.item(0);l.password="",t.transaction("LastPassSavedLogins2","readwrite").objectStore("LastPassSavedLogins2").put(l)}else t.transaction(function(t){t.executeSql("UPDATE LastPassSavedLogins2 SET password = '' WHERE username = ?",[e.wxusername],function(e,t){},function(e,t){console_log(t)})})})};1==i.rows.item(0).protected?unprotect_data(l,!1,r):2==i.rows.item(0).protected&&r(lpdec(l,AES.hex2bin(SHA256(e.wxusername))))}};if(g_indexeddb){var i={rows:{item:function(e){return this[e]},length:0}};t.transaction("LastPassSavedLogins2","readonly").objectStore("LastPassSavedLogins2").openCursor(IDBKeyRange.only(e.wxusername)).onsuccess=function(e){e.target.result&&""!=e.target.result.value.password&&(i.rows[i.rows.length]=e.target.result.value,i.rows.length++),a(0,i)}}else t.transaction(function(t){t.executeSql("SELECT * FROM LastPassSavedLogins2 WHERE username = ? AND password != ''",[e.wxusername],a,function(e,t){})})}""!=e.wxsessid&&(lp_phpsessid=e.wxsessid);var l=AES.hex2bin(e.keyhex),r=null!=g_local_key?AES.bin2hex(g_local_key):"";lploggedin&&g_username==e.wxusername&&r==e.keyhex||(lploggedin&&g_username==e.wxusername?(g_local_key=l,g_local_key_hex=e.keyhex,g_local_key_hash=SHA256(g_local_key)):(lploggedin&&""!=g_username&&loggedOut(!1,"differentuser"),g_local_key=l,g_local_key_hex=e.keyhex,g_local_key_hash=SHA256(g_local_key),lpWriteKeyFile(),LP.lplogincheck(!0,null,e.wxusername,e.wxhash)))}else lploggedin||LP.lplogincheck(!0)}function reorderOnURL(e,t,a,i){var l=lpParseUri(t),r=lpcanonizeUrl(t,l),n="string"==typeof l.path?l.path.split("/"):new Array,o=lp_gettld_url(t),s=new Array;for(var d in e)if(check_ident_aid(d)){var c=g_sites[d];if(void 0!==c&&void 0!==c.url&&(c.save_all||!a||""!=c.unencryptedUsername||""!=c.password)&&(!i||accthaspassword(c))){var u=lpParseUri(c.url);c.realmmatch=(t==g_basicauth_url||t==g_basicauth_origurl)&&(lpmdec_acct(c.realm_data,!0,c,g_shares)==g_basicauth_realm||g_basicauth_found&&""==g_basicauth_realm&&1==c.basic_auth),c.servermatch=l.host==u.host,c.portmatch=compare_ports(l,u),c.serverportmatch=c.servermatch&&c.portmatch?1:0,c.usernamematch=void 0!==g_username_vals[t]&&""!=g_username_vals[t]&&(g_username_vals[t]==c.unencryptedUsername||is_equivalent_email(g_username_vals[t],c.unencryptedUsername,t,c.url)),c.urlmatch=lpcanonizeUrl(c.url)==r;var f,_="string"==typeof u.path?u.path.split("/"):new Array;for(f=0;f<n.length&&f<_.length&&_[f]==n[f];f++);c.pathlevelmatch=f,c.fieldmatchcount=0,s.push(c)}}s.sort(lp_aids_sort_func);var g="string"==typeof l.path?l.path:"";return s=checkurlrules(g_urlrules,s,o,g,l.host,g_sites,get_port(l))}function lp_aids_sort_func(e,t){return e.realmmatch!=t.realmmatch?e.realmmatch?-1:1:e.usernamematch!=t.usernamematch?e.usernamematch?-1:1:e.fav!=t.fav?"1"==e.fav?-1:1:e.urlmatch!=t.urlmatch?e.urlmatch?-1:1:e.serverportmatch&&t.serverportmatch&&e.pathlevelmatch!=t.pathlevelmatch?e.pathlevelmatch>t.pathlevelmatch?-1:1:e.serverportmatch!=t.serverportmatch?e.serverportmatch?-1:1:e.servermatch!=t.servermatch?e.servermatch?-1:1:e.fieldmatchcount!=t.fieldmatchcount?e.fieldmatchcount>t.fieldmatchcount?-1:1:e.last_touch!=t.last_touch?e.last_touch>t.last_touch?-1:1:e.name!=t.name?e.name<t.name?-1:1:0}function lp_sort_case_insensitive_name(e,t){return(e=e.name.toLowerCase())<(t=t.name.toLowerCase())?-1:1}function launchautologin(e,t){if(check_ident_aid(e)){var a=g_sites[e];a&&(t||!a.pwprotect&&!g_prompts.login_site_prompt?(g_last_launch[a.aid]=(new Date).getTime(),openURL(a.url,function(e,t){g_launches[gettabid(e)]=t},a.aid)):a.pwprotect&&needs_secure_reprompt(a)?security_prompt(function(){launchautologin(e,!0)},null,null,!0,a.aid,!1):security_prompt(function(){launchautologin(e,!0)}))}}function is_max_frames_exceeded(e,t){var a=10;if(null==t)return!0;try{var i=g_CS_tops[e],l=g_CS[e][i],r="";r=g_ischrome&&l?lp_gettld_url(l.sender.tab.url):lp_gettld_url(gettaburl(l)),void 0===i?L("still waiting for topdoc to register for [tab:"+e+"] tld="+r):L("topdoc="+i+" tld="+r),r&&"dailykos.com"==r&&(a=40)}catch(e){console.error("is_max_frames_exceeded: "+e)}if(debug){var n=count_cs_for_tabid(e);n>0&&console.warn("is_max_frames_exceeded: CS table count="+n+", global g_CS_count="+g_CS_count[e]),dumpinfo_for_tabid(e)}return g_skip_ad_frames&&(a=25),t[e]>a}function fillbestCS(e,t,a,i){"number"==typeof a&&(a=a.toString());var l=get_record(a);if((l||null===a||0===a)&&update_cs_lastfill_aid(e,a),void 0===e||!l)return!1;var r=null;return i||(i={aid:a}),i.cmd="fillbest",void 0===i.clearfilledfieldsonlogoff&&(i.clearfilledfieldsonlogoff=lpGetPref("clearfilledfieldsonlogoff",0)),void 0===i.realurl&&(i.realurl=l.url),l.save_all&&(r=get_SAED_username_password_fields(l)),void 0===i.username&&(l.save_all&&r&&r.length>0?i.username=r[0]:i.username=getusernamefromacct(l)),void 0===i.password&&(l.save_all&&r&&r.length>0?i.password=r[1]:i.password=getpasswordfromacct(l)),void 0===i.custom_js&&(i.custom_js=l.custom_js),void 0===i.domains&&(i.domains=getacceptabletlds(l.url)),void 0===i.is_launch&&(i.is_launch=!!(void 0!==g_launches[e]&&g_launches[e]&&g_launches[e]==l.aid&&"undefined"!=typeof g_last_launch&&void 0!==g_last_launch[l.aid]&&(new Date).getTime()-g_last_launch[l.aid]<=25e3)),void 0===i.automaticallyFill&&(i.automaticallyFill=1),void 0===i.updatefields&&(i.updatefields=0),void 0===i.addurid&&(i.addurid=0),void 0===i.aid&&(i.aid=a),void 0===i.sharedsite&&(i.sharedsite=null!=l.sharedfromaid&&""!=l.sharedfromaid&&"0"!=l.sharedfromaid&&"null"!=l.sharedfromaid?1:0),void 0===i.dontfillautocompleteoff&&(i.dontfillautocompleteoff=getInt(lpGetPref("dontfillautocompleteoff",0))),void 0===i.saveall&&(i.saveall=!!l.saveall),void 0===i.topurl&&(i.topurl=get_top_url(e,t)),write_history({cmd:"fillbestCS",tabid:e,docnum:t,aid:a,username:i.username,force_fillbest:i.force_fillbest,custom_js:i.custom_js}),sendCS(e,i,t),!0}function fillfieldCS(e,t,a,i,l){"number"==typeof a&&(a=a.toString());var r=get_record(a);return!(void 0===e||!r)&&(i||(i={aid:a}),i.cmd="fillfield",void 0===i.clearfilledfieldsonlogoff&&(i.clearfilledfieldsonlogoff=lpGetPref("clearfilledfieldsonlogoff",0)),void 0===i.dontfillautocompleteoff&&(i.dontfillautocompleteoff=getInt(lpGetPref("dontfillautocompleteoff",0))),void 0===i.realurl&&(i.realurl=r.url),void 0===i.aid&&(i.aid=a),void 0===i.tabid&&(i.tabid=e),void 0===i.custom_js&&(i.custom_js=r.custom_js),void 0===i.domains&&(i.domains=getacceptabletlds(r.url)),void 0===i.is_launch&&(i.is_launch=!!(void 0!==g_launches[e]&&g_launches[e]&&g_launches[e]==r.aid&&"undefined"!=typeof g_last_launch&&void 0!==g_last_launch[r.aid]&&(new Date).getTime()-g_last_launch[r.aid]<=25e3)),void 0===i.automaticallyFill&&(i.automaticallyFill=1),void 0===i.from_iframe&&(i.from_iframe=0),void 0===i.formname&&(i.formname=""),void 0===i.type&&(i.type="text"),void 0===i.doconfirm&&(i.doconfirm=2),void 0!==i.delayquants&&parseInt(i.delayquants)||(i.delayquants=0),void 0===i.topurl&&(i.topurl=get_top_url(e,t)),""!=r.custom_js&&(i.username=getusernamefromacct(r),i.password=getpasswordfromacct(r),i.onlyfill=l?0:1),void 0===i.name||void 0===i.value?(console_error("missing required fields!"),!1):(write_history({cmd:"fillfieldCS",tabid:e,docnum:t,aid:i.aid,name:i.name,custom_js:i.custom_js,manualfill:i.manualfill,is_launch:i.is_launch,originator:i.originator,delay:i.humanize?i.delayquants:null}),i.humanize&&i.delayquants?setTimeout(function(){sendCS(e,i,t)},i.delayquants*HUMANIZE_DELAY_QUANTUM):sendCS(e,i,t),!0))}function submitCS(e,t,a,i){"number"==typeof a&&(a=a.toString());var l=get_record(a);if(void 0===e||!l)return!1;var r=void 0!==l.submit_id?l.submit_id:"",n=void 0!==l.submit_html?l.submit_html:"",o=void 0!==l.submit_js?l.submit_js:"";return i||(i={aid:a}),i.cmd="submit",void 0===i.aid&&(i.aid=a),void 0===i.custom_js&&(i.custom_js=l.custom_js),void 0===i.submit_id&&(i.submit_id=r),void 0===i.submit_html&&(i.submit_html=n),void 0===i.submit_js&&(i.submit_js=o),void 0!==i.delayquants&&parseInt(i.delayquants)||(i.delayquants=0),"bankofamerica.com"==lp_gettld_url(l.url)?pass:(write_history({cmd:"submitCS",tabid:e,docnum:t,aid:a,submit_id:r,submit_js:o,delay:i.humanize?i.delayquants:null}),i.humanize&&i.delayquants?setTimeout(function(){sendCS(e,i,t)},i.delayquants*HUMANIZE_DELAY_QUANTUM):sendCS(e,i,t)),!0}function customjs_has_humanize(e){var t=get_record(e);return!!t&&("string"==typeof t.custom_js&&t.custom_js.indexOf("lphumanize")>=0)}function customjs_has_v2humanize(e){var t=get_record(e);return!!t&&("string"==typeof t.custom_js&&t.custom_js.indexOf("lpv2humanize=1")>=0)}function customjs_has_dontsubmit(e){var t=get_record(e);return!!t&&("string"==typeof t.custom_js&&t.custom_js.indexOf("lpdontsubmit")>=0)}function check_for_frame_mismatch_ok(e,t,a,i){if(!a||null==e)return!1;var l=0;return void 0!==t&&t&&(l=t),!(l&&!frame_and_topdoc_has_same_domain(e)&&(ftd_report_error(e,i||"unknown"),!lpConfirmYesNo(a+"\n\n"+lp_gettld_url(ftd_get_frameparenturl(e)))))}function set_casper_active_tab(e,t){if(g_iscasper&&e){var a=g_CS[g_CS_tops[t]];e.casper_activeTab=a}return!0}function get_casper_active_tab(e){return g_iscasper&&e&&e.casper_activeTab?e.casper_activeTab:null}function count_fillfield_confirms(){var e,t=0;for(e in Object.keys(g_fillfield_confirm_perfield))!0===g_fillfield_confirm_perfield[e]&&t++;return t}function sufficient_condition_fill_saveall(e){if(!e)return!1;var t,a=null,i=null;if(count_fillfield_confirms()>=3){for(t in e.fields)if(e.fields.hasOwnProperty(t)&&e.fields[t]&&("text"==e.fields[t].type||"email"==e.fields[t].type||"tel"==e.fields[t].type)&&""!=e.fields[t].value){a=e.fields[t].name;break}for(t in e.fields)if(e.fields.hasOwnProperty(t)&&e.fields[t]&&"password"==e.fields[t].type&&""!=e.fields[t].value){i=e.fields[t].name;break}if(a&&i)return!0}return!1}function customjs_has_force_fillbest(e){var t=get_record(e);return!!t&&("string"==typeof t.custom_js&&t.custom_js.indexOf("__lpforcefillbest")>=0)}function sufficient_condition_fill_nonsaveall(e){if(!e)return!1;var t=null,a=null;return!!(count_fillfield_confirms()>=2&&(t=getusernamefromacct(e),a=getpasswordfromacct(e),t&&a))}function customjs_has_userpass_overrides(e){var t=get_record(e);return!!t&&("string"==typeof t.custom_js&&(t.custom_js.indexOf("lpcurrpass")>=0||t.custom_js.indexOf("lpcurruser")>=0))}function clearformsCS(e,t){return!!e&&(void 0!==t&&null!==t||(t="all"),write_history({cmd:"clearformsCS",tabid:e,docnum:t}),sendCS(e,{cmd:"clearforms"},t),!0)}function given_username_in_accts(e,t,a){if(!e)return!1;if(!t)return!0;for(var i=null,l=0;l<e.length;l++)if(i=e[l]){if(t==i.unencryptedUsername)return!0;if(is_equivalent_email(t,i.unencryptedUsername,a,a))return!0}return!1}
//# sourceMappingURL=sourcemaps/fromcs.js.map
