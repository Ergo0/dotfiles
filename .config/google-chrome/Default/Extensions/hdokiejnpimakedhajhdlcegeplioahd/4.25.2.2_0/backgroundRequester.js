LPBackgroundRequester=function(e){return function(t,n){var i,a,o=this,r=null,s=!1,c=[],u=(n=n||{}).interfaceDefinition,f=Date.now(),d=function(e){e.sourceFrameID=r,LPMessaging.makeRequest(i,e,function(t){d({type:"contentScriptResponse",data:t,frameID:e.frameID||0})})},l=(a=function(e){if(e.frameID===r)switch(e.type){case"backgroundResponse":case"contentScriptResponse":l=e.data,LPMessaging.handleResponse(l);break;case"contentScriptRequest":t=e.data,a=e.sourceFrameID,LPMessaging.handleRequest(u,t,function(e){d({type:"contentScriptResponse",data:e,frameID:a})},{context:n.reflectionContext,additionalArguments:a})}else"initialization"===e.type&&function(e){if(null===r&&e.request.initializationID===f){"undefined"!=typeof Topics&&Topics.get(Topics.REQUEST_FRAMEWORK_INITIALIZED).publish(e,o),r=e.frameID,s=!1,i({type:"initialized",sourceFrameID:r});for(var t=0,n=c.length;t<n;++t)c[t]()}}(e.data);var t,a,l},e.Raven?e.Raven.wrap(a):a),m=function(t){var a,o;a=function(){i({type:"initialize",data:{initializationID:f,interfaceName:n.interfaceName,top:n.mainRequestFramework,url:e.location.href,childFrameCount:document.getElementsByTagName("iframe").length,frameIdentity:t}})},o=n.reflectionContext||window,"undefined"!=typeof LPPlatform&&LPPlatform.onLoad?LPPlatform.onLoad(o,a):"loading"===o.document.readyState?o.addEventListener("DOMContentLoaded",a):a()};this.initialize=function(e){null!==r||s||(i=t(l,p),n.frameIdentityManager?n.frameIdentityManager.getFrameIdentity(m):m(),s=!0),e&&c.push(e)},this.sendRequest=function(e){null===r?this.initialize(function(){d(e)}):d(e)};var p=function(){r=null,c=[]}}}(this);
//# sourceMappingURL=sourcemaps/backgroundRequester.js.map
