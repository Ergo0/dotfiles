ExtensionDropdown=function(e){var t,n,o=$(e.body),i=e.getElementById("items"),a=e.getElementById("searchResults"),s=e.getElementById("recentSites"),r=e.getElementById("identitiesMenuItem"),l=e.getElementById("matchingSitesTopLevel"),c=e.getElementById("matchingSites"),d=e.getElementById("addCustomItems"),u=$("#topLevelContainer"),p=$("#vaultMenuItem"),m=$("#addOmariaItems"),g=$("#allItems"),f=$("#groupLabel"),b=$("#backButton"),v=$("#debugconsole"),P=$("#encryptedExportMenuItem"),h=$("#wifiExportMenuItem"),I=$("#matchingSitesMenuItem"),y=$("#recentSitesMenuItem"),L=$("#container"),T=$("#searchInput"),_=$("#applicationsMenuItem"),S=$("#logoContainer"),E=$("#logoPartner"),C=null,w=!1,x=function(){LPPlatform.setDropdownPopoverSize(L.outerHeight(),L.outerWidth())},M=null,k=null,D=null,A=null,O=null,F=null,N=null,B=null,R=null,H=null,V=null,G=null,K=!1,z=!1,U=!1,Y=!1,j={},W=null,Z={},X=[],q={},Q=function(e){if(f.empty(),e){var t=e.getName(),n=(t=t.replace(/\\/g," \\ ")).indexOf("\\",t.length/2);if(-1===n&&(n=t.lastIndexOf("\\")),n>0){var o=LPTools.createElement("div","textOverflowContainer groupLabel");o.appendChild(LPTools.createElement("span",null,t.substring(0,n))),f.append(LPTools.createElement("span","textTail","Â "+t.substring(n))),f.append(o),LPTools.setupMiddleEllipsis(f)}else f.append(LPTools.createElement("span","groupLabel",t));f.find(".groupLabel").attr("title",e.toString())}};q.GroupState=function(e){var t=LPTools.getNavIndex();this.pop=function(n){e.rebuildItems(null,n),n&&LPTools.setNavIndex(t),Q(e._model)}},q.SearchState=function(){var e=new q.CSSState("searchItem",{restoreKeyboardNav:!1});this.pop=function(){fe(),e.pop()}},q.TopLevelMatchingSitesState=function(e){var t=new q.CSSState("matchingSites"),n=new q.GroupState(e);this.pop=function(){n.pop(),t.pop()}},q.CSSState=(t=o.attr("class"),n=function(e){o.removeClass(t),o.addClass(e),t=e},function(e,o){var i=t;if(n(e),LPTools.getOption(o,"applyKeyboardNav",!0)){var a=LPTools.getOption(o,"selectFirst",!1);LPTools.addKeyBoardNavigation($(".extensionMenuItem:visible"),{selectFirst:a})}this.pop=function(){Q(null),n(i),LPTools.getOption(o,"restoreKeyboardNav",!0)&&LPTools.addKeyBoardNavigation($(".extensionMenuItem:visible"),{displayItems:0===X.length&&G?G.getItems():null}),o&&"function"==typeof o.onPop&&o.onPop()}});var J,ee=function(){$("#container").LP_show(),ie();var t=bg.get("LPContentScriptFeatures").ziggy,n=bg.get("LPContentScriptFeatures").omaria;C={isZiggySet:t,isOmarSet:n,showHelpText:t};var o=function(){te(),ue(),ge(C),LPTools.parseUserSpecificMenu(e.getElementById("mainMenu"),LPProxy.getAccountClass()),LPProxy.isEnterpriseUser()&&$("#specialOfferMenuItem").hide(),$("#username").text(bg.get("g_username")),setTimeout(function(){ae(),oe()}),$e(),t||($("#mainMenu").addClass("showIcons"),ne()),bg.sendLpImprove("openicondropdown")},i=LPPlatform.getExtensionDropdownDelay();i>=0?setTimeout(o,i):o()},te=function(){L.addClass("loading")},ne=function(){x(),L.addClass("initialized"),LPTools.addKeyBoardNavigation($(".extensionMenuItem:visible"),{displayItems:G?G.getItems():null}),T.focus()},oe=function(){bg.sendTimingEvent("loadDropdown","start",window.performance.timing.navigationStart),bg.sendTimingEvent("loadDropdown","stop",window.performance.timing.loadEventEnd,{numberOfItems:LPProxy.getSites().concat(LPProxy.getNotes()).concat(LPProxy.getApplications()).length})},ie=function(){LPFeatures.updateFeatures({import:!0,noexport:!1,show_notes:!0,hideidentities:!1,show_formfills:!0})},ae=function(){if(LPProxy.initializeModel(),pe(C),re(C),!z&&bg.get("g_local_accts_version")>-1){for(var e in z=!0,L.removeClass("loading"),Z)Z[e]();var t=T.val();t&&be(t)}},se=function(e,t){t=t||{};return LPProxy.getPreference("showAcctsInGroups",!0)&&(e=LPProxy.assignItemsToGroups(e,!1),t.separateFavorites=!0),new Container(e,t)},re=function(e){e.isOmarSet?((D=new Container(LPProxy.getAllItems(),$.extend({},e,{omarItems:!0,trackAction:!0}))).setElement(i),H=new Container(LPProxy.getCustomNoteTemplates().map(function(e){return new AddCustomItemDisplay(e)}),$.extend({},e,{additionalItemClasses:"addOmariaItem",autoExpandSingleItem:!1,value:"Custom"})),ce(H.getItemCount())):((A=se(LPProxy.getSites(),e)).setElement(i),(O=se(LPProxy.getNotes(),e)).setElement(i),(F=new Container(LPProxy.getFormFills(),e)).setElement(i),(N=new Container(LPProxy.getApplications(),e)).setElement(i)),R=new Container(LPProxy.getAllItems(),$.extend({},e,{moreOptionsState:q.SearchState,moreOptionsCallback:w?x:null}))},le=function(e){var t=["extensionMenuItem","omariaMenuItem"];e&&e.attrs&&e.attrs.class&&(t=t.concat(e.attrs.class));var n=$.extend({},e.attrs,{class:t}),o=LPTools.createElement("li",n);return o.appendChild(LPTools.createElement("i",e.icon+" menuIcon")),o.appendChild(LPTools.createElement("span","name",e.name)),e.addMoreButton&&o.appendChild(LPTools.createElement("div","more")),n.childView&&$(o).bind("click",ke),e.onClick&&$(o).bind("click",e.onClick),o},ce=function(e){var t=LPProxy.getRecordConfig(),n=LPProxy.getAllModelTypes();m.empty(),g.empty(),t.viewConfig.forEach(function(o){if(o.forEach(function(o){if("all"!==o){var a=LPProxy.getConfigViewObject(o);a.types.forEach(function(o){var s=LPProxy.getConfigTypeObject(o);(a.default||n.includes(s.recordType))&&g.append(le({attrs:{class:"omariaItem",childView:"omariaItems"},name:a.name,icon:t.icons[s.id],addMoreButton:!0,onClick:function(e){!function(e,t){switch(t&&D.applyFilter({showEmptyGroups:!1,func:function(e){return e instanceof GroupDisplay||e.getRecordType()===t}}),D.rebuildItems(i,!e.originalEvent.isTrusted),t){case"Account":xe(D,"Empty_Site_Omaria",Strings.translateString("You can save and fill usernames and passwords for any website or app."),Strings.translateString("Add a password"),t);break;case"Generic":xe(D,"Empty_Note_Omaria",Strings.translateString("Use a secure note to save important documents in your LastPass vault."),Strings.translateString("Add a secure note"),t);break;case"Address":xe(D,"Empty_Address_Omaria",Strings.translateString("Add an address to auto-fill your email, phone number, and other contact info."),Strings.translateString("Add an address"),t);break;case"Credit Card":xe(D,"Empty_Credit_Card_Omaria",Strings.translateString("Next time you go shopping, they'll be waiting!"),Strings.translateString("Add a payment card"),t);break;case"Bank Account":xe(D,"Empty_Bank_Account_Omaria",Strings.translateString("Save and fill your bank accounts securely on any device with LastPass."),Strings.translateString("Add a bank account"),t)}}(e,s.recordType)}}));var r=null;s.recordType===t.TYPE.Custom?e>0&&(r=le({attrs:{class:"addOmariaItem",childView:"addCustomItems"},name:s.name,icon:t.icons[s.id],addMoreButton:!0,onClick:function(e){H.rebuildItems(d,!e.originalEvent.isTrusted)}})):r=le({attrs:{class:"addOmariaItem"},name:s.name,icon:t.icons[s.id],onClick:function(){de(s.recordType)}}),r&&m.append(r)})}}),o!==t.viewConfig[0]){if(!g[0].lastChild.classList.contains("omarSpacer")){var a=LPTools.createElement("li","omarSpacer");g.append(a)}var s=LPTools.createElement("li","omarSpacer");m.children().last().hasClass("omarSpacer")||m.append(s)}});var o=LPTools.createElement("li",{class:"extensionMenuItem addOmariaItem",value:"saveAll"},Strings.translateString("Save All Entered Data"));m.append(o),$('.addOmariaItem[value="saveAll"]').bind("click",function(){bg.lpevent("m_saed"),bg.get_selected_tab_data(null,function(e){bg.sendLpImprove("save_all_entered_data",{domain:bg.lp_gettld_url(e.url)})}),bg.saveall()})},de=function(e){bg.lpevent("m_add"),"Account"===e?bg.get_selected_tab_data_no_extension(null,function(e){Ie({defaultData:{url:e?e.url:""}})}):ye({defaultData:{notetype:e}})},ue=function(){v.LP_removeAttr("style"),P.LP_removeAttr("style"),h.LP_removeAttr("style"),_.LP_removeAttr("style"),bg.is_user_debug_enabled()&&v.show(),bg.have_binary()&&(P.show(),bg.LPPlatform.isWin()&&h.show()),LPTools.hasProperties(bg.get("g_applications"))&&_.show(),LPFeatures.allowNotes()?$("#notesMenuItem").show():$("#notesMenuItem").hide()},pe=function(t){if(t.isOmarSet&&(r=e.getElementById("omarIdentitiesMenuItem")),k=LPProxy.getIdentities(),LPProxy.enableCurrentIdentity(k),k.length>0){ve(M);for(var n=[],o=0,i=k.length;o<i;++o)n.push(k[o].newDisplayObject());new IdentityContainer(n,t).initialize(e.getElementById("identities"))}else $(r).hide()},me=function(e,t,n){var o,i,a=function(e){var t=bg.lpmdec(e.extra,!0),n=/Language:(.+)/.exec(t);return n&&n.length>1?n[1].substr(0,2):"en"},s=[],r=[];for(o=0,i=W.length;o<i;++o){var l=LPProxy.getNoteModel(W[o].aid);if(l){var c=a(l._data);-1===r.indexOf(c)&&r.push(c)}}for(o=0,i=W.length;o<i;++o){var d=W[o].aid;if("account"===W[o].type)s.push(new MatchingAccountDisplay(LPProxy.getSiteModel(d)));else if("note"===W[o].type){var u=LPProxy.getNoteModel(d);s.push(new MatchingNoteDisplay(u,r.length>1?a(u._data):null))}}(G=new Container(s,t)).setElement(e),G.rebuildItems()},ge=function(t){for(var n=0,o=(W=bg.getmatchingsites(!1,!0,!1)).length;n<o;++n)j[W[n].aid]=!0;t.isZiggySet||LPProxy.getPreference("toplevelmatchingsites",!1)?(y.addClass("divider"),p.addClass("divider"),u.removeClass("hidden"),W.length>2?p.addClass("topLevelMatchesShadow"):(p.removeClass("topLevelMatchesShadow"),0===W.length&&(p.removeClass("divider"),u.addClass("hidden"))),Pe("topLevelMatchingSites",function(){me(l,$.extend({},t,{autoExpandSingleItem:!1,moreOptionsElement:e.getElementById("matchingSites"),moreOptionsState:q.TopLevelMatchingSitesState,addLastClass:!1,trackAction:!0,sortFunction:VaultItemBaseDisplay.prototype.sortOmarMatchingItems})),ne()})()):(0===W.length?I.LP_removeAttr("style"):(I.show(),$("#matchingSiteCounter").text(W.length)),p.removeClass("divider"),p.removeClass("topLevelMatchesShadow"),u.addClass("hidden"))},fe=function(){LPTools.removeDOMChildren(a);for(var e=0,t=B.length;e<t;++e){var n=B[e],o=n.build(C);n.postBuild(o),a.appendChild(o)}if(0===B.length){var i=LPTools.buildEmptyPlaceholder(Strings.translateString("No Matching Results"),"extensionSearchPlaceholder",a);a.appendChild(i)}LPTools.addKeyBoardNavigation(a.children,{rightArrowSelector:".moreItem",selectFirst:!0,displayItems:B})},be=(J=null,function(e){e.length>0?(z&&(B&&B.forEach(function(e){e.hideInContextOptions()}),B=R.getSearchResultItems(e),fe()),K||(_e("search",{applyKeyboardNav:!1,onPop:function(){T.val("")}}),K=!0,bg.sendLpImprove("search",{source:"icon"}))):J&&J.length>0&&(Se(),K=!1),J=e,w&&x()}),ve=function(t){var n=Strings.translateString("Identities")+" ("+t.getName()+")",o=r.firstChild;3!==o.nodeType?(o=e.createTextNode(n),r.insertBefore(o,r.firstChild)):o.textContent=n},Pe=function(e,t){return function(){var n=this,o=arguments,i=function(){t.apply(n,o)};z?i():Z[e]=i}},he=function(e){return e||(e={}),e.saveOptions={source:"icon"},e},Ie=function(e){bg.LPPlatform.openTabDialog("site",he(e))},ye=function(e){bg.LPPlatform.openTabDialog("note",he(e))},Le=function(e){bg.LPPlatform.openTabDialog("formFill",he(e))},Te=function(e){e.appendChild(LPTools.createElement("li","extensionMenuItem none","None Available"))},_e=function(e,t){X.push(new q.CSSState(e,t)),w&&x()},Se=function(e){var t=X.pop();t&&t.pop(e),w&&x()},Ee=dialogs.generatePassword,Ce=function(){Ee.getDialog().close(),b.unbind("click",Ce)},we=null,xe=function(e,t,n,o,i){if(i=i||"Generic",e.isEmpty()){var a=LPTools.createElement("div","emptyView");a.appendChild(LPTools.createElement("img",{src:"images/vault_4.0/"+t+".png",class:"emptyViewIcon"})),a.appendChild(LPTools.createElement("h1","emptyViewText",n));var s=LPTools.createElement("input",{class:"addItem rbtn",type:"button",value:o,tabindex:-1});s.appendChild(LPTools.createElement("i","fa fa-trash")),a.appendChild(s),s.addEventListener("click",function(e){de(i)}),LPTools.addKeyBoardNavigation($(s),{selectFirst:!0}),document.getElementById("items").appendChild(a)}},Me=function(e,t,n){if(e.isEmpty()){var o=LPTools.createElement("div","emptyView");o.appendChild(LPTools.createElement("img",{src:"images/vault_4.0/"+t,class:"emptyViewIcon"})),o.appendChild(LPTools.createElement("h1","emptyViewText",n)),document.getElementById("items").appendChild(o)}},$e=function(){bg.LPPartner&&bg.LPPartner.getPartnerInfo&&bg.LPPartner.getPartnerInfo(function(e){e&&($(a).addClass("partner-logo"),E.attr("src",e.logoUrl).removeClass(e.class).addClass(e.class),S.show(),x())})};T.LP_addSearchHandlers("inputDialog",function(e){be(e)}),b.bind("click",Se);var ke=function(e){var t;_e(function(e){for(var t=null;null!==e&&null===(t=e.getAttribute("childview"));)e=e.parentElement;return t}(e.target),{selectFirst:!e.originalEvent.isTrusted}),(t=e)&&(t.stopPropagation(),t.preventDefault())};$("[childview]").bind("click",ke),$("#addSite").bind("click",function(e){bg.get_selected_tab_data_no_extension(null,function(e){bg.lpevent("m_add"),Ie({defaultData:{url:e?e.url:""}}),LPPlatform.closePopup()}),e.stopPropagation()}),$("#saveAllEnteredData").bind("click",function(){bg.lpevent("m_saed"),bg.get_selected_tab_data(null,function(e){bg.sendLpImprove("save_all_entered_data",{domain:bg.lp_gettld_url(e.url)})}),bg.saveall()}),$("#addNote").bind("click",function(){bg.lpevent("m_addn"),ye()}),$("#addFormFill").bind("click",function(){bg.lpevent("m_af"),Le()}),$("#addCreditCard").bind("click",function(){bg.lpevent("m_af"),Le({defaultData:{profiletype:FormFill.prototype.FORM_FILL_TYPE_CREDIT_CARD}})}),$("#clearForms").bind("click",function(){bg.lpevent("m_clrf"),bg.clearforms("icon")});var De=null;$("#chooseProfile").bind("click",function(){dialogs.chooseProfile.open({preSetup:function(e){if(null===De){var t=dialogs.chooseProfile.parentElementID,n=e.options.hideHeader;De=function(){dialogs.chooseProfile.parentElementID=t,e.options.hideHeader=n,e.$element.css("min-height","")}}e.$element.css("min-height",0),dialogs.chooseProfile.parentElementID="chooseProfileCreditCard",e.options.hideHeader=!0},onClose:function(){Se()},saveOptions:{source:"icon"}})}),$("#vaultMenuItem").bind("click",function(){bg.lpevent("m_ov"),bg.openvault()}),$("#sitesMenuItem").bind("click",Pe("sites",function(e){A.rebuildItems(i,!e.originalEvent.isTrusted),Me(A,"Empty_Site.png",Strings.translateString("Remember every password"))})),$("#formFillsMenuItem").bind("click",Pe("formFills",function(e){F.rebuildItems(i,!e.originalEvent.isTrusted),Me(F,"Empty_Form.png",Strings.translateString("Fill Every Form"))})),$("#applicationsMenuItem").bind("click",Pe("applications",function(e){N.rebuildItems(i,!e.originalEvent.isTrusted),Me(N,"Empty_Site.png",Strings.translateString("Remember every password"))})),$("#generateMenuItem").bind("click",function(){!0===bg.get("LPContentScriptFeatures").better_generate_password_enabled&&(Ee=dialogs.betterGeneratePassword),Ee.open({preSetup:function(e){if(null===we){var t=Ee.parentElementID,n=e.options.hideHeader,o=e.dynamicHeight;we=function(){Ee.parentElementID=t,e.options.hideHeader=n,e.useDynamicHeignt(o)}}Ee.parentElementID="extensionDropdownGeneratePassword",e.options.hideHeader=!0,e.useDynamicHeignt(!1)},postSetup:function(e){LPPlatform.setDropdownPopoverSize(e.$element.outerHeight()+L.outerHeight(),L.outerWidth())},onClose:function(){Se(),x()},onCopy:function(){LPPlatform.closePopup(!0)},saveOptions:{source:"icon"}}),b.unbind("click",Ce),b.bind("click",Ce)}),$("#notesMenuItem").bind("click",Pe("notes",function(e){O.rebuildItems(i,!e.originalEvent.isTrusted),Me(O,"Empty_Note.png",Strings.translateString("Store Every Note"))})),$("#clearMostRecent").bind("click",function(){bg.clearrecent(),LPTools.removeDOMChildren(s),Te(s)});var Ae=Pe("mostRecent",function(e){U||(!function(){var e=bg.getClearRecentTime(),t=bg.Preferences.get("recentUsedCount"),n=null;(n=bg.get("LPContentScriptFeatures").omaria?D.getItemChildren():A.getItemChildren().concat(O.getItemChildren())).sort(VaultItemBaseDisplay.prototype.sortByMostRecent);for(var o=[],i=0,a=n.length;i<a&&i<t;++i){var r=n[i];r.getLastTouchValue()>=e&&o.push(r._model.newDisplayObject())}o.length>0?(V=new Container(o,$.extend({},C,{sortFunction:VaultItemBaseDisplay.prototype.sortByMostRecent}))).initialize(s):Te(s)}(),U=!0),LPTools.addKeyBoardNavigation(s.children,{rightArrowSelector:".moreItem",selectFirst:!e.originalEvent.isTrusted,displayItems:V.getItems()})});y.bind("click",Ae);var Oe=Pe("matchingSites",function(t){Y||(me(c),Y=!0),LPTools.addKeyBoardNavigation(e.getElementById("matchingSites").children,{rightArrowSelector:".moreItem",selectFirst:!t.originalEvent.isTrusted})});if(I.bind("click",Oe),$("#prefMenuItem").bind("click",function(){bg.lpevent("m_op"),bg.openprefs()}),$("#helpMenuItem").bind("click",function(){bg.lpevent("m_oh"),bg.openhelp()}),$("#adminConsoleMenuItem").bind("click",function(){bg.lpevent("m_oec"),bg.openentconsole()}),$("#logoutMenuItem").bind("click",function(){bg.lpevent("m_lo"),bg.loggedOut(!1,"menu")}),$("#challengeMenuItem").bind("click",function(){bg.lpevent("m_sec"),bg.openseccheck()}),$("#favoritesMenuItem").bind("click",function(){bg.lpevent("m_of"),bg.openfavorites(!1,"icon")}),$("#aboutMenuItem").bind("click",function(){bg.lpevent("m_abt"),bg.openabout()}),v.bind("click",function(){bg.lpevent("m_dbgcon"),bg.opendebugtab()}),$("#csvExportMenuItem").bind("click",function(){bg.lpevent("m_e"),bg.openexport()}),$("#formFillExportMenuItem").bind("click",function(){bg.lpevent("m_eff"),bg.formfillexport()}),P.bind("click",function(){bg.lpevent("m_elp"),bg.openlastpassexport()}),h.bind("click",function(){bg.lpevent("m_ewlan"),bg.wlanexport()}),$("#printSitesMenuItem").bind("click",function(){bg.lpevent("m_p"),bg.openprint(!1)}),$("#printNotesMenuItem").bind("click",function(){bg.lpevent("m_pn"),bg.openprint(!0)}),$("#refreshMenuItem").bind("click",function(){bg.lpevent("m_ref"),LPProxy.refreshSites()}),$("#clearCachMenuItem").bind("click",function(){bg.lpevent("m_cl"),bg.clearCache(!1,!0,!1)}),$("#myAccountMenuItem").bind("click",function(){bg.lpevent("m_mya"),bg.openmyaccount()}),$("#sessionsMenuItem").bind("click",function(){bg.lpevent("m_ses"),bg.opensessions()}),LPPlatform.addEventListener(window,"unload",function(){Ve()}),o.on("click",".extensionMenuItem, .footer, .contextOptionsDropdown",function(){LPPlatform.closePopup()}),LPFeatures.allowGift()){var Fe=$("#specialOfferMenuItem");Fe.show(),Fe.bind("click",function(){bg.openURL(LPProxy.getBaseURL()+"gift.php")})}$("#omarChallengeMenuItem").bind("click",function(){bg.lpevent("m_sec"),bg.openseccheck()}),$("#omarFavoritesMenuItem").bind("click",function(){bg.lpevent("m_of"),bg.openfavorites(!1,"icon")}),$("#omarPrefMenuItem").bind("click",function(){bg.lpevent("m_op"),bg.openprefs()}),$("#omarHelpMenuItem").bind("click",function(){bg.lpevent("m_oh"),bg.openhelp()}),$("#omarAboutMenuItem").bind("click",function(){bg.lpevent("m_abt"),bg.openabout()}),$("#omarRefreshMenuItem").bind("click",function(){bg.lpevent("m_ref"),LPProxy.refreshSites()}),$("#omarClearCachMenuItem").bind("click",function(){bg.lpevent("m_cl"),bg.clearCache(!1,!0,!1)}),$("#omarSessionsMenuItem").bind("click",function(){bg.lpevent("m_ses"),bg.opensessions()}),$("#safariMessageButton").bind("click",function(){bg.openURL("https://lastpass.com/safariAppExtension.php?source=dropdown"),LPPlatform.closePopup()}),Topics.get(Topics.REFRESH_DATA).subscribe(function(){ae()}),Topics.get(Topics.PUSH_STATE).subscribe(function(e){X.push(e)}),Topics.get(Topics.EDIT_SITE).subscribe(function(e){e.vaultItem=e.vaultItem.getID(),Ie(e)}),Topics.get(Topics.EDIT_NOTE).subscribe(function(e){e.vaultItem=e.vaultItem.getID(),ye(e)}),Topics.get(Topics.EDIT_FORM_FILL).subscribe(function(e){e.vaultItem=e.vaultItem.getID(),Le(e)}),Topics.get(Topics.EDIT_APPLICATION).subscribe(function(e){e.vaultItem=e.vaultItem.getID(),bg.LPPlatform.openTabDialog("application",e)}),Topics.get(Topics.IDENTITY_ENABLE).subscribe(function(e){LPProxy.enableIdentity(e),M=e}),Topics.get(Topics.CONFIRM).subscribe(function(e){He("confirmation",e)}),Topics.get(Topics.ERROR).subscribe(function(e){e&&He("alert",{title:Strings.Vault.ERROR,text:e})}),Topics.get(Topics.REPROMPT).subscribe(function(e){He("reprompt",{successCallback:e})}),Topics.get(Topics.LEFT_ARROW).subscribe(function(){LPTools.disableMouse(),Se(!0)}),Topics.get(Topics.CLEAR_DATA).subscribe(function(){for(var e=X.length-1;e>-1;--e)X[e].pop();X=[],LPTools.setNavIndex(0),T.val(""),K=!1,z=!1,U=!1,Y=!1,j={},Z={},W=null,we&&we(),De&&De(),L.removeClass("initialized"),g.empty(),m.empty(),Dialog.prototype.closeAllDialogs(!0)}),Topics.get(Topics.INITIALIZED).subscribe(function(){Strings.translate(e.body),LPPlatform.setupDropdownImportMenu(L)});var Ne,Be,Re,He=function(e,t){$("#container").LP_hide(),LPTools.removeKeyBoardNavigation(),t=$.extend(t,{onResize:function(e,t){LPPlatform.setDropdownPopoverSize(e,t)},onClose:function(){LPPlatform.closePopup()}}),LPDialog.openDialog(e,t)},Ve=function(){Topics.get(Topics.CLEAR_DATA).publish()},Ge=(Ne=function(){bg.getData({context:"extensionDropdown",callback:function(){ee()}})},Be={},Re=function(e){LPPlatform.move(screenY-(e.screenY-Be.y),e.screenX-Be.x)},function(){w=!0,document.body.classList.add("quickSearch"),window.addEventListener("mousedown",function(e){e.target===document.getElementById("searchContainer")&&(Be.x=e.clientX,Be.y=e.clientY,window.addEventListener("mousemove",Re),e.preventDefault())}),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",Re)}),Topics.get(Topics.ESCAPE).subscribe(function(){LPPlatform.doClosePopup()}),Account.prototype.getDisplayClass=function(){return MatchingAccountDisplay},"undefined"!=typeof bg?Ne():(Topics.get(Topics.INITIALIZED).subscribe(function(){Ne()}),LPPlatform.initialize({context:"extensionDropdown",callback:Ne}))});return{setup:ee,State:q,isMatchingSite:function(e){return!0===j[e]},setGroupLabel:Q,open:function(){var e=bg.get("g_badgedata");if(e&&"notification"===e.cmd){switch(e.alerttype){case"duplicate":He("duplicatePassword",{notification:e});break;case"weak":He("weakPassword",{notification:e})}switch(e.type){case"error":He("notification",{notification:bg.get("g_notification_data")});break;case"mpwchange":He("securityNotice",{notification:bg.get("g_notification_data")});break;case"lpalert":He("breachAlert",{notification:bg.get("g_notification_data")})}bg.clear_badge()}else e&&"migration"===e.cmd?(He("migration",{notification:e}),bg.clear_badge()):ee()},openDialog:He,reset:Ve,setBigIcons:function(e){bg.set("g_bigicons",e)},openQuickSearch:Ge}}(document);
//# sourceMappingURL=sourcemaps/extensionDropdown.js.map
